# üõí E-Comm Churn Radar

–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –æ—Ç—Ç–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π e-commerce –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã, –∫–ª–∏–∫–∏, –ø–æ–∫—É–ø–∫–∏).  
–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: **—Å—ã—Ä—ã–µ –ª–æ–≥–∏ ‚Üí —Ñ–∏—á–∏ ‚Üí –æ–±—É—á–µ–Ω–∏–µ ‚Üí –º–µ—Ç—Ä–∏–∫–∏ ‚Üí –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è ‚Üí –¥–∞—à–±–æ—Ä–¥ –∏ inference**.

> ‚ö†Ô∏è –ë–æ–ª—å—à–∏–µ —Å—ã—Ä—ã–µ CSV **–Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏** –∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `.gitignore`. –ö–ª–∞–¥–∏ –∏—Ö –ª–æ–∫–∞–ª—å–Ω–æ –≤ `data/`.

---

## üîé –ß—Ç–æ —É–º–µ–µ—Ç –ø—Ä–æ–µ–∫—Ç

- –ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –ø–æ–º–µ—Å—è—á–Ω—ã–µ event-–ª–æ–≥–∏ –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ–∏—á–∏ (CLICKS, PURCHASES, –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å –∏ –ø—Ä.).
- –û–±—É—á–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥–µ–ª–µ–π (LightGBM/XGBoost/LogReg) –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à—É—é.
- –°—á–∏—Ç–∞–µ—Ç **ROC-AUC, PR-AUC, F1**, –ø–æ–¥–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π **threshold**.
- –°—Ç—Ä–æ–∏—Ç –æ–±—ä—è—Å–Ω–∏–º–æ—Å—Ç—å: **Feature Importances** + **SHAP**.
- –î–∞—à–±–æ—Ä–¥ (Streamlit): –∫—Ä–∏–≤—ã–µ ROC/PR, –≤–∞–∂–Ω–æ—Å—Ç–∏, SHAP, –ø–æ–∏—Å–∫ –ø–æ `user_id`.
- –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ–Ω–ª–∞–π–Ω–æ–≤–æ–≥–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
‚îú‚îÄ‚îÄ configs/
‚îÇ   ‚îî‚îÄ‚îÄ config.yaml                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π/–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
‚îú‚îÄ‚îÄ data/                            # –°—ã—Ä—ã–µ/–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–≤ .gitignore)
‚îÇ   ‚îú‚îÄ‚îÄ processed_train.csv          # (—Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–∞–º–∏)
‚îÇ   ‚îî‚îÄ‚îÄ processed_test.csv           # (—Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–∞–º–∏)
‚îú‚îÄ‚îÄ models/                          # –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –æ–±—É—á–µ–Ω–∏—è (–≤ .gitignore)
‚îÇ   ‚îú‚îÄ‚îÄ model.pkl
‚îÇ   ‚îú‚îÄ‚îÄ metrics.json
‚îÇ   ‚îú‚îÄ‚îÄ feature_importances.csv
‚îÇ   ‚îî‚îÄ‚îÄ feature_columns.json
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ common/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils.py
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ make_dataset.py          # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞/—Å–µ–º–ø–ª–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü. demo)
‚îÇ   ‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ build_features.py        # –ê–≥—Ä–µ–≥–∞—Ü–∏—è event-–ª–æ–≥–æ–≤ –≤ —Ñ–∏—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ train_model.py           # –û–±—É—á–µ–Ω–∏–µ + —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ predict_model.py         # –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –ø–æ user_id / CSV
‚îÇ   ‚îî‚îÄ‚îÄ visualization/
‚îÇ       ‚îî‚îÄ‚îÄ dashboard.py             # Streamlit-–¥–∞—à–±–æ—Ä–¥
‚îî‚îÄ‚îÄ README.md
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```powershell
python -m venv .venv
.\.venv\Scripts\ctivate
pip install -r requirements.txt
```

---

## üß© –î–∞–Ω–Ω—ã–µ

- –õ–æ–∫–∞–ª—å–Ω–æ –ø–æ–ª–æ–∂–∏ –ø–æ–º–µ—Å—è—á–Ω—ã–µ CSV —Å —Å–æ–±—ã—Ç–∏—è–º–∏ –≤ `data/` (–æ–Ω–∏ **–Ω–µ –∫–æ–º–º–∏—Ç—è—Ç—Å—è**).
- –ò–º–µ–Ω–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –ª—é–±—ã–º–∏ ‚Äî –ø—É—Ç–∏ –∑–∞–¥–∞—é—Ç—Å—è –≤ `configs/config.yaml`.
- –ï—Å–ª–∏ –±–æ–ª—å—à–∏—Ö CSV –Ω–µ—Ç, –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å **–¥–µ–º–æ-–Ω–∞–±–æ—Ä** (—Å–º. –Ω–∏–∂–µ).

---

## ‚ñ∂Ô∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1) (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
```powershell
python -m src.data.make_dataset --config configs/config.yaml --demo
```

### 2) –û–±—É—á–µ–Ω–∏–µ
```powershell
python -m src.models.train_model --config configs/config.yaml
```

### 3) –î–∞—à–±–æ—Ä–¥
```powershell
streamlit run src/visualization/dashboard.py
```

### 4) –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```powershell
python -m src.models.predict_model --user-id 123456 --config configs/config.yaml
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏/–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

- `models/metrics.json` ‚Äî –∏—Ç–æ–≥–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (ROC-AUC, PR-AUC, F1, threshold).
- `models/feature_importances.csv` ‚Äî –≤–∞–∂–Ω–æ—Å—Ç—å —Ñ–∏—á (LightGBM/XGB).
- `models/feature_columns.json` ‚Äî **–ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤**, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞—à–±–æ—Ä–¥/inference.
- `models/model.pkl` ‚Äî –ø–∞–π–ø–ª–∞–π–Ω `preprocess + model`.

---

## üß† –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è

- **Feature Importances** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–∞—è –≤–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–≤.
- **SHAP** ‚Äî –≤–∫–ª–∞–¥ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –≤ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Ö–æ–¥–∞ –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω–æ (summary), —Ç–∞–∫ –∏ –ª–æ–∫–∞–ª—å–Ω–æ (–ø–æ `user_id`).

---

## üîí .gitignore (–≤–∞–∂–Ω–æ)

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏—Å–∫–ª—é—á–µ–Ω—ã:
- `data/*.csv`, `data/*.parquet`, `models/*.pkl` ‚Äî —Ç—è–∂—ë–ª—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã,
- `.venv/`, `__pycache__/`, IDE-–º—É—Å–æ—Ä,
- –∫—ç—à Streamlit.  
–ü–∞–ø–∫–∏ `data/` –∏ `models/` –æ—Å—Ç–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ `.gitkeep`.
